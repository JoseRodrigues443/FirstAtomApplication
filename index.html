<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Hello World!</title>

    <!-- CSS theme -->
    <link rel="stylesheet" type="text/css" href="CSS/theme.css">

    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="jquery_plantuml.js"></script>
    <!-- rawdeflate.js is implicity used by jquery_plantuml.js -->

</head>

<body onload="loader()">
    <header>
        <h1>PlantUml Editor</h1>

    </header>

    <nav>
        <textarea id="myTextArea" name="styled-textarea" onfocus="setbg('#e5fff3');" onblur="setbg('white')">
            Insert here the plantUml code...
        </textarea>
        <button type="button" onclick="alterDivWithPlantUml()">Try it</button>
        <button type="button" onclick="fillTextArea()">Insert example</button>

    </nav>

    <article id="plantUml">
        <!--<iframe id="iframeElement" src="welcomeIframe.html"></iframe>-->

        <h1>Generated PlantUml</h1>
        <hr>
        <img uml='
Bob->Alice : foo
Bob<--Alice : foo
'>
        <hr>
    </article>
</body>
<script>
    function loader() {
        //mainWindow.maximize() 
        $('#myTextArea').load("plantUmlExample.puml");
    }
	/**
		reads from file and alters the textArea
	**/
    function fillTextArea() {
        //document.getElementById("myTextArea").value = "Fifth Avenue, New York City";

        const fs = require("fs");
        // Synchronous read
        var data = fs.readFileSync('plantUmlExample.puml');
        $('#myTextArea').val(data);

        //console.log("Synchronous read: " + data.toString());
    }

    /**
		alters the dib to generate the plant Uml
    **/
    function alterDivWithPlantUml() {
        var x = document.getElementById("myTextArea").value;
        var string = "<h1>Generated PlantUml</h1>\n<img uml=\'" + x + "\'>";
        string.replace("\"", "\\\"");

        var myDiv = document.getElementById("plantUml");
        myDiv.innerHTML = string;
        plantuml_runonce();    //reruns the Jquery for plantUml rendering
    }
</script>

<script>
    // You can also require other files to run in this process
    require('./renderer.js')
</script>

</html>


